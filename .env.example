# ==========================================
# AhaVault 环境变量配置模板
# ==========================================
# 使用说明: 复制此文件为 .env 并填入真实值
# 命令: cp .env.example .env
# ==========================================

# ==========================================
# 应用配置
# ==========================================
# 应用环境: dev | staging | production
APP_ENV=dev

# 应用版本
APP_VERSION=0.1.0

# 调试模式
APP_DEBUG=true

# 日志级别: debug | info | warn | error
LOG_LEVEL=debug

# ==========================================
# 核心安全配置（必填）
# ==========================================
# Master Key (KEK) - 用于加密文件密钥，必须 32 字节（64 字符 HEX）
# 生成方法: openssl rand -hex 32
APP_MASTER_KEY=

# 全局邀请码 (开启邀请制注册时使用)
APP_INVITE_CODE=AHAVAULT2026

# ==========================================
# 数据库配置 - PostgreSQL
# ==========================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=ahavault
POSTGRES_PASSWORD=
POSTGRES_DB=ahavault
POSTGRES_SSLMODE=disable

# 数据库连接池配置
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=5m

# ==========================================
# 数据库配置 - Redis
# ==========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_POOL_SIZE=10
REDIS_TIMEOUT=5s

# ==========================================
# 存储配置
# ==========================================
# 存储类型: local 或 s3
STORAGE_TYPE=local

# 本地存储路径 (STORAGE_TYPE=local 时)
STORAGE_PATH=/data/storage

# S3 配置 (STORAGE_TYPE=s3 时)
S3_ENDPOINT=
S3_REGION=us-east-1
S3_BUCKET=ahavault
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_USE_SSL=true

# ==========================================
# 服务器配置
# ==========================================
SERVER_HOST=0.0.0.0
SERVER_PORT=8080
SERVER_READ_TIMEOUT=10s
SERVER_WRITE_TIMEOUT=10s
SERVER_IDLE_TIMEOUT=60s

# Gin 运行模式: debug | release | test
GIN_MODE=debug

# ==========================================
# 业务配置 - 文件相关
# ==========================================
# 单文件大小限制 (字节), 默认 2GB
MAX_FILE_SIZE=2147483648

# 允许的 MIME 类型（逗号分隔）
ALLOWED_MIME_TYPES=image/*,video/*,application/pdf,application/zip

# ==========================================
# 业务配置 - 存储配额
# ==========================================
# 新用户默认配额 (字节), 默认 10GB
DEFAULT_USER_QUOTA=10737418240

# ==========================================
# 业务配置 - 分享相关
# ==========================================
# 取件码长度 (6-12 位)
SHARE_CODE_LENGTH=8

# 默认分享有效期
DEFAULT_SHARE_EXPIRY=24h

# 最大分享有效期
MAX_SHARE_EXPIRY=168h

# 单次分享最大文件数
MAX_FILES_PER_SHARE=100

# 单用户最大活跃分享数
MAX_ACTIVE_SHARES_USER=50

# ==========================================
# 业务配置 - 垃圾回收
# ==========================================
# 软删除保留天数
GC_RETENTION_DAYS=7

# GC 清理间隔
GC_CLEANUP_INTERVAL=1h

# 上传碎片保留时间
GC_FRAGMENT_RETENTION=24h

# ==========================================
# 业务配置 - 注册控制
# ==========================================
# 是否开启注册
REGISTRATION_ENABLED=true

# 是否需要邀请码
INVITE_CODE_REQUIRED=false

# ==========================================
# 安全验证（可选）
# ==========================================
# Cloudflare Turnstile 或 hCaptcha 密钥
TURNSTILE_SECRET_KEY=
# HCAPTCHA_SECRET_KEY=

# ==========================================
# SMTP 邮件配置（可选）
# ==========================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@ahavault.com
